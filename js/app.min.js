const token="d591077569952be4b1fda8484b6eced2",elForm=document.querySelector(".form"),elFormInput=elForm.querySelector(".searchInput"),elCurrentWeatherBox=document.querySelector(".infogram_left"),elWeatherIcon=elCurrentWeatherBox.querySelector(".infogram_current-weather-icon"),elSunrise=elCurrentWeatherBox.querySelector(".infogram_sunrise"),elSunset=elCurrentWeatherBox.querySelector(".infogram_sunset"),elDate=elCurrentWeatherBox.querySelector(".infogram_date"),elCelcium=elCurrentWeatherBox.querySelector(".infogram_celcium"),elInfo=elCurrentWeatherBox.querySelector(".infogram_info"),elLocationn=elCurrentWeatherBox.querySelector(".infogram_location"),elWind=elCurrentWeatherBox.querySelector(".infogram_wind"),elHumidity=elCurrentWeatherBox.querySelector(".infogram_humidity"),elPressure=elCurrentWeatherBox.querySelector(".infogram_pressure"),elCitiesList=document.querySelector(".cities_list"),elHourlyList=document.querySelector(".hourly_list"),elDailyList=document.querySelector(".daily_list"),elCitiesTemplate=document.querySelector("#cities").content,elCurrentWeatherTemplate=document.querySelector("#current").content,elDailyItemsTemplate=document.querySelector("#daily").content,elHouryItemsTemplate=document.querySelector("#hourly").content,fragment=document.createDocumentFragment(),dailyFragment=document.createDocumentFragment();let dailyWeatherIcons={Clear:"./animation-ready/clear-day.svg",Clouds:"./animation-ready/cloudy.svg",Rain:"./animation-ready/rain.svg",Snow:"./animation-ready/snow.svg",Mist:"./animation-ready/mist.svg"},weatherIcons={Clear:"../icons/clear-day.svg",Clouds:"../icons/cloudy.svg",Rain:"../icons/rain.svg",Snow:"../icons/snow.svg",Mist:"../icons/mist.svg"},daysEng=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months=["January","February","March","April","May","June","July","August","September","October","November","December"],dayTime=["NIGHT","MORNING","DAY","EVENING"];function displayaDailyDayNames(e){return`${daysEng[new Date(1e3*e).getDay()]}`}function displayaDailyDays(e){return`${new Date(1e3*e).getDate()} ${months[new Date(1e3*e).getMonth()]}`}function displayDailyWeatherIconShow(e,t,r,n,a,i){if("Rain"==e)return t.querySelector(r).style.setProperty(n,`url(${a.Rain})`);if("Clouds"==e)return t.querySelector(r).style.setProperty(n,`url(${a.Clouds})`);if("Clear"==e)return t.querySelector(r).style.setProperty(n,`url(${a.Clear})`);if("Snow"==e)return t.querySelector(r).style.setProperty(n,`url(${a.Snow})`);if("Mist"==e)return t.querySelector(r).style.setProperty(n,`url(${a.Mist})`);else return t.querySelector(r).style.setProperty(n,`url(https://openweathermap.org/img/wn/${i}.png`)}function displayCurrentWeatherIconShow(e,t,r,n){if("Clear"==e)return t.querySelector(r).src=dailyWeatherIcons.Clear;if("Clouds"==e)return t.querySelector(r).src=dailyWeatherIcons.Clouds;if("Rain"==e)return t.querySelector(r).src=dailyWeatherIcons.Rain;if("Mist"==e)return t.querySelector(r).src=dailyWeatherIcons.Mist;if("Snow"==e)return t.querySelector(r).src=dailyWeatherIcons.Snow;else return t.querySelector(r).src=`https://openweathermap.org/img/wn/${n}.png`}async function citiesWeather(e){try{let t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${token}&units=metric`),r=await t.json();for(let n=0;n<1;n++){let a=r.sys.country,i=r.name,o=r.weather[0].main,l=r.main.temp,s=elCitiesTemplate.cloneNode(!0);s.querySelector(".citiesCountry").textContent=a,s.querySelector(".cities_city").textContent=i,s.querySelector(".cities_info").textContent=o,s.querySelector(".cities_celcium").textContent=`${Math.floor(l)} \xb0C`,s.querySelector(".cities_more-info").dataset.name=i,displayCurrentWeatherIconShow(o,s,".cities_info-icon",r.weather[0].icon),fragment.appendChild(s)}elCitiesList.appendChild(fragment)}catch(u){console.log(u)}}async function currentWeather(e="Tashkent"){try{let t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${token}&units=metric`),r=await t.json(),n=r.sys.sunrise,a=r.sys.sunset,i=r.weather;document.querySelectorAll(".hourly_time-names");for(let o=0;o<r.weather.length;o++){elCurrentWeatherBox.innerHTML="";let l=elCurrentWeatherTemplate.cloneNode(!0);l.querySelector(".infogram_sunrise").textContent+=getSuns(n),l.querySelector(".infogram_sunset").textContent+=getSuns(a),l.querySelector(".infogram_date").textContent=`${displayaDailyDayNames(r.dt)} ${displayaDailyDays(r.dt)} ${new Date(1e3*r.dt).toTimeString().slice(0,5)}`,l.querySelector(".infogram_celcium").textContent+=Math.floor(r.main.temp),displayCurrentWeatherIconShow(i[o].main,l,".infogram_current-weather-icon",i[0].icon),l.querySelector(".infogram_info").textContent=i[o].description.replace(i[o].description[0],i[o].description[0].toUpperCase()),l.querySelector(".infogram_location").textContent=`${r.name}, ${r.sys.country}`,l.querySelector(".infogram_wind").textContent+=`${Math.floor(r.wind.speed)}m/s`,l.querySelector(".infogram_humidity").textContent+=`${r.main.humidity}%`,l.querySelector(".infogram_pressure").textContent+=`${r.main.pressure}mm`,fragment.appendChild(l)}elCurrentWeatherBox.appendChild(fragment)}catch(s){console.log(s)}}async function dailyWeather(e="Tashkent"){try{let t=await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${e}&appid=${token}&units=metric`),r=await t.json(),n=r.list,a=n.filter(e=>e.dt_txt.endsWith("12:00:00"));elHourlyList.innerHTML="",elDailyList.innerHTML="";for(let i=0;i<5;i++){let o=a[i].weather[0].main,l=elDailyItemsTemplate.cloneNode(!0);l.querySelector(".daily_day").textContent=displayaDailyDayNames(a[i].dt),l.querySelector(".daily_date").textContent=displayaDailyDays(a[i].dt),l.querySelector(".daily_min").textContent=`${Math.floor(a[i].main.temp_min)}\xb0`,l.querySelector(".daily_max").textContent=`${Math.ceil(a[i].main.temp_max)}\xb0`,l.querySelector(".daily_info").textContent=`${o}`,displayDailyWeatherIconShow(o,l,".daily_info","--daily",weatherIcons,a[i].weather[0].icon),dailyFragment.appendChild(l)}for(let s=0;s<8;s++){let u=n[s].weather[0].main,c=n[s].dt_txt.slice(10,16),y=elHouryItemsTemplate.cloneNode(!0);displayDailyWeatherIconShow(u,y,".hourly_value","--im",weatherIcons,n[s].weather[0].icon),y.querySelector(".hourly_value").textContent=`${Math.floor(n[s].main.temp)}\xb0`,y.querySelector(".hourly_time").textContent=c,fragment.appendChild(y)}elHourlyList.appendChild(fragment),elDailyList.appendChild(dailyFragment)}catch(m){console.log(m)}}function formatTime(e){return e<10?`0${e}`:e}function getSuns(e){let t;return`${formatTime(new Date(1e3*e).getHours())}: ${formatTime(new Date(1e3*e).getMinutes())}`}elForm.addEventListener("submit",e=>{e.preventDefault();let t=elFormInput.value;currentWeather(defaultt=t),dailyWeather(defaultt=t)}),elCitiesList.addEventListener("click",e=>{e.preventDefault();let t=e.target.dataset.name;currentWeather(defaultt=t),dailyWeather(defaultt=t)}),citiesWeather("Berlin"),citiesWeather("Dubai"),citiesWeather("Reading"),citiesWeather("Istanbul"),citiesWeather("Amsterdam"),currentWeather(),dailyWeather();